<spinner name="html5spinner" ng-cloak="">
    <div class="overlay"></div>
    <div class="spinner">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
    </div>
    <div class="please-wait">Please Wait...</div>
</spinner>

<nav class="nav navbar-dark bg-primary" role="navigation">
    <div class="nav-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <label class="navbar-brand">Crisp Cloud Solutions</label>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <li><a ng-click='goToDashboard()'  style="color:white"><span class="glyphicon glyphicon-arrow-left"></span></a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false" style="color:white"><span class="glyphicon glyphicon-menu-hamburger"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li align='right'>
                        <a ng-click='onLogout()'>
                            <span class="glyphicon glyphicon-log-out"></span>Log Out
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</nav>
<div class="container-fluid">
    <div class="row content">
        <br>
        <br>
        <br>
        <div class="col-sm-3 sidenav1">
            <br>
            <br>
            <div class="input-group">
                <input type="text" class="form-control" ng-model="searchText" placeholder="Search Blog..">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">
            <span class="glyphicon glyphicon-search"></span>
          </button>
        </span>
            </div>
            <br>
            <br>
            <div class="panel panel-default">
                <div class="panel-body">
                    <ul class="nav nav-pills nav-stacked">



                        <li class= "" ng-repeat="user_list in user_show | filter:searchText"  ng-style="{
                          'background': clicked==user_list.id ? 'lightblue' :'white',
                          'cursor': my_id==user_list.id ?  'not-allowed' :'pointer'
                      }" ng-click="clicked_highlight(user_list.id,user_list.user_id)">
                            <img ng-src="{{profilePicPath+user_list.profilePic}}" class="img-rounded" width="25" height="50">&nbsp;<span style="font-size:8px"> {{ user_list.user_name }}</span>
                      <span class="online"  ng-style="{
                          'background-color': my_id==user_list.id ? '':'#0EE700'
                      }"><span class="glyphicon glyphicon-ok-circle"></span></span>
                            Inbox <span class="badge">{{readData[$index].readCount}}</span>
                        </li>

                    </ul><br>

                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="col-sm-9">
                    <h2> Chat &nbsp;<img src="./images/chat/Online-Chat.jpg" width="80" height="70" class="img-circle"></h2>
                    <hr>

                    <h4></h4>

                    <div class="chatbox" id="chatbox">
                        <!--<div class="panel-heading">-->
                        <!--<div class="attach"> </div>-->
                        <!--</div>-->
                        <div>

                            <!--<span class='sender_msg'>{{ //msgs.msg }}</span>-->
                            <div id="msgBox" class="col-lg-12" ng-repeat="data in msgs">
                                <div class="text">
                                <span class="pre1">&nbsp;<span class='sender'>{{(data.myid==my_id)? 'You :':data.name +' says :'}}</span>&nbsp;
                                <div style="word-wrap: break-word;">{{data.msg}}-{{data.date |  date:'dd.MM.yyyy -h:mma'}}</div></span>
                                    <!--{{(data.msg==null)? '<img ng-src="{{data.image}}">':data.msg}}-->
                                    <!--<span ng-show="(data.msg=='' && data.file == null)"><img ng-src="{{data.imagePath}}" width="400" height="100"></span>-->
                                    <!--<span ng-show="(data.msg==!'' && data.image==null && data.file==null)">{{data.msg}}</span>-->
                                    <!--<a ng-if="(data.file!==null)" ng-init="file=data.filePath" ng-click="openFile(file)">{{data.file}}</a>-->
                                    <span ng-show="showImage(data.image)"><a ng-href="{{uploadImagePath + data.image}}" target="_blank"> <img ng-src="{{uploadImagePath + data.image}}" width="100" heghit="100" class="img-responsive"><br>{{data.date |  date:'dd.MM.yyyy -h:mma'}}</a></span>
                                    <!--<span  ng-if="data.msg!==''">{{data.msg}}</span>-->
                                    <a ng-show="showFile(data)" ng-init="file=data.file" ng-click="openFile(uploadFilePath + file)">{{data.file}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <form role="form">
                        <div class="form-group">
                            <textarea class="form-control" rows="4" ng-disabled="(select_userid === null)" id="myInputs" ng-model='msg_text' required></textarea>
                        </div>
                        <div class="col-sm-2">
                            <button type="button" class="btn btn-info"  ng-disabled="(select_userid === null)" id="msg_box" ng-model='msg_text' ng-click="send_msg(null)">
                                SEND &nbsp;<span class="glyphicon glyphicon-send"></span>
                            </button>
                            <!--<button class="btn btn-warning" ng-click="choose()"></button>-->
                        </div>
                        <div class="col-sm-2">
                            <div data-toggle="collapse" data-target="#demo">
                            <span class="fa-stack fa-lg" ng-hide="(select_userid === null)" ng-click="enableImage()">
                                <i class="fa fa-square-o fa-stack-2x"></i>
                                <i class="fa fa-camera fa-stack-1x"></i>
                            </span>
                            <span class="fa-stack fa-lg" ng-click="enableFile()" ng-hide="(select_userid === null)">
                                <i class="fa fa-square-o fa-stack-2x"></i>
                                <i class="fa fa-folder-open fa-stack-1x"></i>
                            </span>

                            </div>
                        </div>
                    </form>
                    <br><br>

                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
<input style="visibility: hidden" type="file" id="f1" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'" accept="image/*" ngf-max-size="20MB" id="fileInput" onchange="angular.element(this).scope().uploadImage(this.files)"/>
<input type="file" type="file" class="form-control" style="visibility: hidden" name="Files" id="f2" ng-model="docFile" accept="{{docPattern}}" onchange="angular.element(this).scope().uploadFile(this.files)"  valid-file required file-

</div>